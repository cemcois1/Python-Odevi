import yaml  #pip ile indirdim import ettim
from tkinter import *
import json #dosyaları açmak ve okumak için
import base64 #bayrak için
import cairosvg
from svglib.svglib import svg2rlg



mylinklist=[
    "node_modules\country-json\src\country-by-capital-city.json",                #başkent
    "node_modules\country-json\src\country-by-languages.json",                   #ülke dili
    "node_modules\country-json\src\country-by-abbreviation.json",                #kısaltması
    "node_modules\country-json\src\country-by-region-in-world.json" ,            #bulunduğu kıta
    "node_modules\country-json\src\country-by-government-type.json" ,            #ülke tipi yönetimi
    "node_modules\country-json\src\country-by-surface-area.json"   ,             #yüzey alanı
    "node_modules\country-json\src\country-by-population.json",                  #nüfus
    "node_modules\country-json\src\country-by-population-density.json",          #nüfus yogunlugu
    "node_modules\country-json\src\country-by-independence-date.json" ,          #bagımsızlık yili
    "node_modules\country-json\src\country-by-currency-name.json" ,              #para birimi adi
    "node_modules\country-json\src\country-by-domain-tld.json",                  #kullandıgı domain
    "node_modules\country-json\src\country-by-calling-code.json",                #alan kodu tr 90 
    "node_modules\country-json\src\country-by-religion.json" ,                   #dini
    "node_modules\country-json\src\country-by-yearly-average-temperature.json",  #yıllık ortalama sıcaklık 14 tane
    "node_modules\country-json\src\country-by-flag.json"   
    ]





def textOlustur():

    with open('node_modules\country-json\src\country-by-name.json') as f:
        verim=json.load(f)

    for i in range(241):#255 ülke var datamda
        #textleri BURADA ÜRETECEĞİM textleri OLUŞTUR VE ADINI GİR PARAMETRE OLARAK
        listNodes.insert(END, str(verim[i]["country"]))

    f.close()

def go (event):
    
    i_secimim=listNodes.curselection()

    
    with open('node_modules\country-json\src\country-by-name.json') as f:
        verim=json.load(f) 
    for i in i_secimim:#bana indexi döndürüyor
        top=Toplevel(bg="#C5DDF8") #yeni pencere aç

        top.title(str(verim[i]["country"]))  #yeni pencerenin başlığı ülke adı olsun **********************************************
      


        with open(mylinklist[0]) as f:
            verim2=json.load(f)
        metin="" 
        for gezinen in range(242):#BASKENTİ

            if(verim2[gezinen].get("country")==str(verim[i]["country"]) ):#ekle
                metin+=str(verim2[gezinen]["city"])+"  "
                label=Label(top,text="Capital city = "+ metin,bg="white")
                label.grid(column=0,row=0)
        
      
        #print(verim2[i]["abbreviation"])
        #print(verim2[0])


        
        metin=""
        with open(mylinklist[1]) as f:  #diller
            verim3=json.load(f)
        for gezinen in range(994):#diller

            if(verim3[gezinen].get("country")==str(verim[i]["country"]) ):#ekle
                #print("tamamdııır")
                metin+=verim3[gezinen]["language"]+"  "

        label=Label(top,text="Language = "+ metin,bg="white")
        label.grid(column=0,row=1)
 

        with open(mylinklist[2]) as f:#kısaltmalar
            verim3=json.load(f)
        metin=""
        for gezinen in range(246):

            if(verim3[gezinen].get("country")==str(verim[i]["country"]) ):#ekle
                #print("tamamdııır")
                metin+=verim3[gezinen]["abbreviation"]+"  "
        
        label=Label(top,text="Abbreviation = "+str(metin),bg="white")
        label.grid(column=0,row=2)

        with open(mylinklist[3]) as f:#bulundugu nokta
            verim4=json.load(f)
        for gezinen in range(243):
            if(verim4[gezinen].get("country")==(str(verim[i]["country"]))):
                label=Label(top,text="Location ="+str(verim4[gezinen]["location"]),bg="white")
                label.grid(column=0,row=3,padx=50,pady=20)

        
        with open(mylinklist[4]) as f:#yonetim tipi
            verim5=json.load(f)
        for gezinen in range(243):
             if(verim5[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Goverment Type ="+str(verim5[gezinen]["government"]),bg="white")
                 label.grid(column=0,row=4,padx=50,pady=20)



        with open(mylinklist[5]) as f:#ülke topragı
            verim6=json.load(f)
        for gezinen in range(240):
             if(verim6[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Area ="+str(verim6[gezinen]["area"])+"  square kilometers",bg="white")
                 label.grid(column=1,row=0,padx=50,pady=20)
        
        with open(mylinklist[6]) as f:#nüfus
            verim7=json.load(f)
        for gezinen in range(243):
             if(verim7[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Population ="+str(verim7[gezinen]["population"])+ " people",bg="white")
                 label.grid(column=1,row=1,padx=50,pady=20)


        with open(mylinklist[7]) as f:#nüfus yogunlugu
            verim8=json.load(f)
        for gezinen in range(243):
             if(verim8[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Population density ="+str(verim8[gezinen]["density"])+" per sq. mi.",bg="white")
                 label.grid(column=1,row=2,padx=50,pady=20)



        with open(mylinklist[8]) as f:#bagımsızlık yili
            verim9=json.load(f)
        for gezinen in range(243):
             if(verim9[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Independence ="+str(verim9[gezinen]["independence"]),bg="white")
                 label.grid(column=1,row=3,padx=50,pady=20)

        with open(mylinklist[9]) as f:#para birimi
            verim10=json.load(f)
        for gezinen in range(243):
             if(verim10[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Currency Name ="+str(verim10[gezinen]["currency_name"]),bg="white")
                 label.grid(column=1,row=4,padx=50,pady=20)


        with open(mylinklist[10]) as f:#kullandıgı domain
            verim11=json.load(f)
        for gezinen in range(243):
             if(verim11[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Top Level Domain="+str(verim11[gezinen]["tld"]),bg="white")
                 label.grid(column=2,row=0,padx=50,pady=20)
                    
        with open(mylinklist[11]) as f:#arama kodu
            verim12=json.load(f)
        for gezinen in range(243):
             if(verim12[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Calling Code="+str(verim12[gezinen]["calling_code"]),bg="white")
                 label.grid(column=2,row=1,padx=50,pady=20)

        with open(mylinklist[12]) as f:#dini
            verim13=json.load(f)
        for gezinen in range(240):
             if(verim13[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Religion="+str(verim13[gezinen]["religion"]),bg="white")
                 label.grid(column=2,row=2,padx=50,pady=20)

        with open(mylinklist[13]) as f:#yıllık ortalama sıcaklık 
            verim14=json.load(f)
        for gezinen in range(243):
             if(verim14[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Yearly Average Temperature ="+str(verim14[gezinen]["temperature"]),bg="white")
                 label.grid(column=2,row=3,padx=50,pady=20)

        with open(mylinklist[14]) as f:#flag
            verim15=json.load(f)

        for gezinen in range(243):
             if(verim15[gezinen].get("country")==(str(verim[i]["country"]))):
                flagxml=verim15[gezinen]["flag_base64"].split(",")[1]
                encoded = verim15[gezinen]["flag_base64"]
                encoded = encoded.replace("data:image/svg+xml;base64,", "")
                decoded = base64.b64decode(encoded)
                with open("NEWFILE.svg", "wb") as f: f.write(decoded)

                with open("NEWFILE.svg","r") as f :
                    datam=f.readlines()

               
                

                
                # base64.encode(input=verim15[gezinen]["flag_base64"],output="UTF-8")
                 

                   
                    
            
        


                 

         
         
                  #yeni pencerede bilgiler alt alta sıralansın şimdilik


#with open('node_modules\country-json\src\country-by-capital-city.json') as json_file:
#    for line in yaml.safe_load(json_file):
#        print (line) # {'country': 'Afghanistan', 'city': 'Kabul'}
#json_file.close()

#with  open('node_modules\country-json\src\country-by-abbreviation.json') as f:
#    veri=json.load(f)

#for  i in range(245):

#    print(veri[i]["country"] ,end='\n')
#f.close()

root=Tk()
root.title('Ulkeler Hakkında Genel Bilgiler')


""""""
frame = Frame(root)
frame.pack(side= LEFT)

listNodes = Listbox(frame, width=20, height=20, font=("Helvetica", 12))


scrollbar = Scrollbar(frame, orient="vertical")
scrollbar.config(command=listNodes.yview)
scrollbar.pack(side="left", fill="y")

#mybutton = Button(root,text="ülkeninadi",padx=11,pady=5,command=butoncalisti,fg="blue")
#mybutton.grid(row=0,column=0)

#mylabel1=Label(root,text="Hello world")
#mylabel1.grid(row=1,column=0,columnspan=5)
#buttonlarıUret()
textOlustur()
listNodes.bind('<Double-1>', go) 
listNodes.pack(side="left", fill="y")
root.mainloop()