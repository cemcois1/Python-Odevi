import yaml  #pip ile indirdim import ettim
from tkinter import *
import json #dosyaları açmak ve okumak için
import base64 #bayrak için





mylinklist=[

    "node_modules\country-json\src\country-by-capital-city.json",                #başkent
    "node_modules\country-json\src\country-by-languages.json",                   #ülke dili
    "node_modules\country-json\src\country-by-abbreviation.json",                #kısaltması
    "node_modules\country-json\src\country-by-region-in-world.json" ,            #bulunduğu kıta
    "node_modules\country-json\src\country-by-government-type.json" ,            #ülke tipi yönetimi
    "node_modules\country-json\src\country-by-surface-area.json"   ,             #yüzey alanı
    "node_modules\country-json\src\country-by-population.json",                  #nüfus
    "node_modules\country-json\src\country-by-population-density.json",          #nüfus yogunlugu
    "node_modules\country-json\src\country-by-independence-date.json" ,          #bagımsızlık yili
    "node_modules\country-json\src\country-by-currency-name.json" ,              #para birimi adi
    "node_modules\country-json\src\country-by-domain-tld.json",                  #kullandıgı domain
    "node_modules\country-json\src\country-by-calling-code.json",                #alan kodu tr 90 
    "node_modules\country-json\src\country-by-religion.json" ,                   #dini
    "node_modules\country-json\src\country-by-yearly-average-temperature.json",  #yıllık ortalama sıcaklık 14 tane
    "node_modules\country-json\src\country-by-flag.json"   
    ]





def textOlustur():

    with open('node_modules\country-json\src\country-by-name.json') as f:
        verim=json.load(f)

    for i in range(241):#255 ülke var datamda
        #textleri BURADA ÜRETECEĞİM textleri OLUŞTUR VE ADINI GİR PARAMETRE OLARAK
        listNodes.insert(END, str(verim[i]["country"]))



def top10pop():
    top=Toplevel(bg="#C5DDF8")
    top.title("Top 10 population")
    with open (mylinklist[6]) as f:
        listem=json.load(f)
    for i in range (243):
        for j in range(242):#bubble catch
            if(int(listem[i]["population"])<int(listem[j]["population"])):
                tmp=listem[j]
                listem[j]=listem[i]
                listem[i]=tmp
    for  k in range(11) :#elemanları aldım
        Label(top,text=str(k+1)+". Country ="+listem[242-k]["country"]+"   population = "+listem[242-k]["population"]).pack()

def top10area():
    top=Toplevel(bg="#C5DDF8")
    top.title("Top 10 area")
    with open (mylinklist[5]) as f:
        listem=json.load(f)
    for i in range (239):
        for j in range(239):#bubble catch
            if(int(listem[i]["area"])<int(listem[j]["area"])):
                tmp=listem[j]
                listem[j]=listem[i]
                listem[i]=tmp
    for  k in range(11) :#elemanları aldım
        Label(top,text=str(k+1)+". Country "+listem[238-k]["country"]+"   Area = "+str(listem[238-k]["area"])).pack()



def go (event):
    
    i_secimim=listNodes.curselection()
    


    with open('node_modules\country-json\src\country-by-name.json') as f:
        verim=json.load(f) 
    for i in i_secimim:#bana indexi döndürüyor
        top=Toplevel(bg="#C5DDF8") #yeni pencere aç

        top.title(str(verim[i]["country"]))  #yeni pencerenin başlığı ülke adı olsun **********************************************
      


        with open(mylinklist[0]) as f:
            verim2=json.load(f)
        metin="" 
        for gezinen in range(242):#BASKENTİ

            if(verim2[gezinen].get("country")==str(verim[i]["country"]) ):#ekle
                metin+=str(verim2[gezinen]["city"])+"  "
                label=Label(top,text="Capital city = "+ metin,bg="white")
                label.grid(column=0,row=0)
        
      
        #print(verim2[i]["abbreviation"])
        #print(verim2[0])


        
        metin=""
        with open(mylinklist[1]) as f:  #diller
            verim3=json.load(f)
        for gezinen in range(994):#diller

            if(verim3[gezinen].get("country")==str(verim[i]["country"]) ):#ekle
                #print("tamamdııır")
                metin+=verim3[gezinen]["language"]+"  "

        label=Label(top,text="Language = "+ metin,bg="white")
        label.grid(column=0,row=1)
 

        with open(mylinklist[2]) as f:#kısaltmalar
            verim3=json.load(f)
        metin=""
        for gezinen in range(246):

            if(verim3[gezinen].get("country")==str(verim[i]["country"]) ):#ekle
                #print("tamamdııır")
                metin+=verim3[gezinen]["abbreviation"]+"  "
        
        label=Label(top,text="Abbreviation = "+str(metin),bg="white")
        label.grid(column=0,row=2)

        with open(mylinklist[3]) as f:#bulundugu nokta
            verim4=json.load(f)
        for gezinen in range(243):
            if(verim4[gezinen].get("country")==(str(verim[i]["country"]))):
                label=Label(top,text="Location ="+str(verim4[gezinen]["location"]),bg="white")
                label.grid(column=0,row=3,padx=50,pady=20)

        
        with open(mylinklist[4]) as f:#yonetim tipi
            verim5=json.load(f)
        for gezinen in range(243):
             if(verim5[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Goverment Type ="+str(verim5[gezinen]["government"]),bg="white")
                 label.grid(column=0,row=4,padx=50,pady=20)



        with open(mylinklist[5]) as f:#ülke topragı
            verim6=json.load(f)
        for gezinen in range(239):
             if(verim6[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Area ="+str(verim6[gezinen]["area"])+"  square kilometers",bg="white")
                 label.grid(column=1,row=0,padx=50,pady=20)
        
        with open(mylinklist[6]) as f:#nüfus
            verim7=json.load(f)
        for gezinen in range(243):
             if(verim7[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Population ="+str(verim7[gezinen]["population"])+ " people",bg="white")
                 label.grid(column=1,row=1,padx=50,pady=20)


        with open(mylinklist[7]) as f:#nüfus yogunlugu
            verim8=json.load(f)
        for gezinen in range(243):
             if(verim8[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Population density ="+str(verim8[gezinen]["density"])+" per sq. mi.",bg="white")
                 label.grid(column=1,row=2,padx=50,pady=20)



        with open(mylinklist[8]) as f:#bagımsızlık yili
            verim9=json.load(f)
        for gezinen in range(243):
             if(verim9[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Independence ="+str(verim9[gezinen]["independence"]),bg="white")
                 label.grid(column=1,row=3,padx=50,pady=20)

        with open(mylinklist[9]) as f:#para birimi
            verim10=json.load(f)
        for gezinen in range(243):
             if(verim10[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Currency Name ="+str(verim10[gezinen]["currency_name"]),bg="white")
                 label.grid(column=1,row=4,padx=50,pady=20)


        with open(mylinklist[10]) as f:#kullandıgı domain
            verim11=json.load(f)
        for gezinen in range(243):
             if(verim11[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Top Level Domain="+str(verim11[gezinen]["tld"]),bg="white")
                 label.grid(column=2,row=0,padx=50,pady=20)
                    
        with open(mylinklist[11]) as f:#arama kodu
            verim12=json.load(f)
        for gezinen in range(243):
             if(verim12[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Calling Code="+str(verim12[gezinen]["calling_code"]),bg="white")
                 label.grid(column=2,row=1,padx=50,pady=20)

        with open(mylinklist[12]) as f:#dini
            verim13=json.load(f)
        for gezinen in range(240):
             if(verim13[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Religion="+str(verim13[gezinen]["religion"]),bg="white")
                 label.grid(column=2,row=2,padx=50,pady=20)

        with open(mylinklist[13]) as f:#yıllık ortalama sıcaklık 
            verim14=json.load(f)
        for gezinen in range(243):
             if(verim14[gezinen].get("country")==(str(verim[i]["country"]))):
                 label=Label(top,text="Yearly Average Temperature ="+str(verim14[gezinen]["temperature"]),bg="white")
                 label.grid(column=2,row=3,padx=50,pady=20)

        with open(mylinklist[14]) as f:#flag
            verim15=json.load(f)

        for gezinen in range(243):
             if(verim15[gezinen].get("country")==(str(verim[i]["country"]))):
                """
                flagxml=str(verim15[gezinen]["flag_base64"]).split(",")[1]
                encoded = verim15[gezinen]["flag_base64"]
                encoded = encoded.replace("data:image/svg+xml;base64,", "")
                decoded = base64.b64decode(encoded) # base 64 ten çevirdim ama svg den çeviremiyorum
                """
         
                  #yeni pencerede bilgiler alt alta sıralansın şimdilik


def ara_func():
    with open('node_modules\country-json\src\country-by-name.json') as f:
        verim=json.load(f) 
    kontrol=True
    for i in range(241):#255 ülke var datamda
        if( str(str.upper( mystring.get()))[0]==verim[i]["country"][0] and kontrol==True):#listeyi tara
           # print(verim[i]["country"])        #ülke listemi tara
            kontrol=False
            listNodes.yview(i)
            break
 
          #taradıgım listedeki elemanlarla eşleşiyorsa stringim 
          #scroolbarımı oraya çek


root=Tk()
root.configure(background= "#C5DDF8")
root.title('Ulkeler Hakkında Genel Bilgiler')


Label(root,text="Top 10").pack(side="top")
top10pop=Button(root,text="Population",command=top10pop).pack(side="top")
top10area=Button(root,text="Area",command=top10area).pack(side="top")
mystring =StringVar(root)
e1 = Entry(root,textvariable = mystring,width=30,fg="blue",bd=3,selectbackground='violet').pack()
butooon= Button(root,text="Search",command=ara_func).pack(side="top")




frame = Frame(root)
frame.pack(side= LEFT)

listNodes = Listbox(frame, width=20, height=20, font=("Helvetica", 12))



scrollbar = Scrollbar(frame, orient="vertical")
scrollbar.config(command=listNodes.yview)
scrollbar.pack(side="left", fill="y")

textOlustur()
listNodes.bind('<Double-1>', go) 
listNodes.pack(side="left", fill="y")


root.mainloop()